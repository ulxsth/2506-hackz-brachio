# タイマー終了時の結果ページ遷移修正計画 📋

## 問題の概要 🐛
- ゲームがタイマーで終了した時（timeLeft <= 0）、結果ページへの遷移で `roomId` クエリパラメータが渡されていない
- 結果ページは `roomId` パラメータが必須のため、エラーが発生している

## 技術的詳細 🔍

### 現在の問題箇所
**ファイル**: `/frontend/app/game/page.tsx`
**行番号**: 497行目
```tsx
// タイマー効果
useEffect(() => {
  if (timeLeft <= 0) {
    router.push('/result'); // ← roomIdが渡されていない！
    return;
  }
  // ...
```

### 正常動作している箇所
1. **手動ゲーム終了** (485行目): `router.push(`/result?roomId=${roomId}`);`
2. **ルーム状態変更による終了** (566行目): `router.push(`/result?roomId=${roomId}`);`

### 結果ページの要件
**ファイル**: `/frontend/app/result/page.tsx`
- `roomId` クエリパラメータを必須として期待
- パラメータがない場合は「ルームIDが見つかりません」エラーを表示

## 修正計画 ⚡

### 1. タイマー終了時の遷移修正
**対象ファイル**: `/frontend/app/game/page.tsx`
**修正内容**:
```tsx
// 修正前
if (timeLeft <= 0) {
  router.push('/result');
  return;
}

// 修正後
if (timeLeft <= 0) {
  const roomId = currentRoom?.id || 'unknown';
  router.push(`/result?roomId=${roomId}`);
  return;
}
```

### 2. 一貫性の確保
- 他の遷移箇所と同様の `roomId` パラメータ渡し方法を使用
- エラーハンドリングも統一する

## 実装範囲 📝
- **必須**: タイマー終了時の遷移修正（1箇所のみ）
- **検証**: 修正後のタイマー終了→結果ページ遷移が正常動作することを確認

## 非実装範囲 ❌
- UI/UX の改善（今回は遷移のバグ修正のみ）
- 他のナビゲーション関連の修正
- 結果ページ自体の機能追加

## 期待される結果 ✅
- タイマーで終了したゲームでも、結果ページに正常に遷移できる
- 結果ページで適切にゲーム結果が表示される
- すべての終了パターンで一貫した動作を実現

## テスト方針 🧪
1. タイマーでゲームを終了させる（時間切れまで待つ）
2. 結果ページに正常に遷移することを確認
3. 結果ページでゲーム結果が表示されることを確認
